﻿@{
    Layout = null;
    var usuarioLogado = ViewBag.Usuario as Usuario;
    var historico = ViewBag.Historico as IEnumerable<HistoricoAcao> ?? Enumerable.Empty<HistoricoAcao>();
}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sonatto</title>
    <link rel="stylesheet" href="~/css/Index.css" />
    <link rel="stylesheet" href="~/css/Adm.css" />
    <link href="~/imgs/Logos/Monografia.png" rel="shortcut icon" />
</head>
<body>
    <div class="navbar">
        @Html.Partial("_Header")
    </div>

    <div class="navDasPag">
        <a asp-controller="Home" asp-action="Index">Home ></a>
        <a asp-controller="Usuario" asp-action="Perfil" style="color:black;">Perfil ></a>
    </div>

    <div class="tituloLogOff">
        <h2>Bem vindo(a) de volta @(usuarioLogado?.Nome ?? "Usuario")</h2>
        <div class="logOff">
            <form asp-controller="Login" asp-action="Logout" method="post" style="display:inline;">
                @Html.AntiForgeryToken()
                <button type="submit" class="logOut" style="cursor:pointer; background:none; border:none; padding:0;">
                    <h4 style="display:inline;">Desconectar</h4>
                    <img src="~/imgs/icones/NTrheoXd.png" alt="Sair" />
                </button>
            </form>
        </div>
    </div>

    <div class="conteudo">
        <div class="painelDeControle">
            <p>Painel de controle</p>
            <div class="acoes">
                <a asp-controller="Produto" asp-action="Adicionar" class="adicionar"><p>Adicionar Produto</p><img src="~/imgs/icones/Adicionar.svg" /></a>
                <a asp-controller="Produto" asp-action="Editar" method='get' class="editar"><p>Editar Produto</p><img src="~/imgs/icones/Editar.svg" /></a>
                <a asp-controller="Produto" asp-action="CatalogoDeletar" class="deletar"><p>Deletar Produto</p><img src="~/imgs/icones/Deletar.svg" /></a>
                <a asp-controller="Usuario" asp-action="GerenciarPerm" class="gerenciar"><p>Gerenciar Permissões</p><img src="~/imgs/icones/Gerenciar.svg" /></a>
            </div>
        </div>
        <div class="historicoDeAcoes">
            <p> Histórico de ações dos Funcionários</p>
            <div class="historico">
                <!--foreach-->
                @foreach (var histAcao in historico)
                {
                    <div class="acaoCard">
                        <img src="~/imgs/icones/Engranagem.svg" />
                        <div class="dadosAcao">
                            <div class="subDadosAcao">
                                <p>Funcionário: @histAcao.Nome</p>
                                <p>Nivel de acesso: @histAcao.NomeNivel</p>
                                <p>Ação: @histAcao.Acao</p>
                                <p>Data: @histAcao.DataAcao.ToString("dd/MM/yyyy HH:mm")</p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

    </div>

    @Html.Partial("_FooterSlim")
</body>
</html>